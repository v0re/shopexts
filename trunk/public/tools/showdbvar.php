<?php
		require_once("./include/mall_config.php");
		$link=mysql_connect($dbHost,$dbUser,$dbPass);
		mysql_select_db($dbName);
		mysql_query("set names utf8");
		
		$sql = "show variables";
		$rs = mysql_query($sql) or die(mysql_error());
		while($row = mysql_fetch_row($rs)){
			$table[] = $row;
			//$tt[$row[0]] = $row[1];
		}

		//error_log(serialize($tt),3,"ok.txt");
		
		$sta = unserialize('a:190:{s:8:"back_log";s:2:"50";s:7:"basedir";s:10:"D:\MySQL4\";s:17:"binlog_cache_size";s:5:"32768";s:23:"bulk_insert_buffer_size";s:7:"8388608";s:20:"character_set_client";s:4:"utf8";s:24:"character_set_connection";s:4:"utf8";s:22:"character_set_database";s:4:"utf8";s:21:"character_set_results";s:4:"utf8";s:20:"character_set_server";s:4:"utf8";s:20:"character_set_system";s:4:"utf8";s:18:"character_sets_dir";s:25:"D:\MySQL4\share\charsets/";s:20:"collation_connection";s:15:"utf8_general_ci";s:18:"collation_database";s:15:"utf8_general_ci";s:16:"collation_server";s:15:"utf8_general_ci";s:17:"concurrent_insert";s:2:"ON";s:15:"connect_timeout";s:1:"5";s:7:"datadir";s:15:"D:\MySQL4\Data\";s:11:"date_format";s:8:"%Y-%m-%d";s:15:"datetime_format";s:17:"%Y-%m-%d %H:%i:%s";s:19:"default_week_format";s:1:"0";s:15:"delay_key_write";s:2:"ON";s:20:"delayed_insert_limit";s:3:"100";s:22:"delayed_insert_timeout";s:3:"300";s:18:"delayed_queue_size";s:4:"1000";s:16:"expire_logs_days";s:1:"0";s:5:"flush";s:3:"OFF";s:10:"flush_time";s:4:"1800";s:17:"ft_boolean_syntax";s:14:"+ -><()~*:""&|";s:15:"ft_max_word_len";s:2:"84";s:15:"ft_min_word_len";s:1:"4";s:24:"ft_query_expansion_limit";s:2:"20";s:16:"ft_stopword_file";s:10:"(built-in)";s:20:"group_concat_max_len";s:4:"1024";s:12:"have_archive";s:3:"YES";s:8:"have_bdb";s:2:"NO";s:21:"have_blackhole_engine";s:2:"NO";s:13:"have_compress";s:3:"YES";s:10:"have_crypt";s:2:"NO";s:8:"have_csv";s:2:"NO";s:19:"have_example_engine";s:2:"NO";s:13:"have_geometry";s:3:"YES";s:11:"have_innodb";s:3:"YES";s:9:"have_isam";s:2:"NO";s:15:"have_ndbcluster";s:2:"NO";s:17:"have_merge_engine";s:3:"YES";s:12:"have_openssl";s:2:"NO";s:16:"have_query_cache";s:3:"YES";s:9:"have_raid";s:2:"NO";s:15:"have_rtree_keys";s:3:"YES";s:12:"have_symlink";s:3:"YES";s:12:"init_connect";s:0:"";s:9:"init_file";s:0:"";s:10:"init_slave";s:0:"";s:31:"innodb_additional_mem_pool_size";s:7:"2097152";s:27:"innodb_autoextend_increment";s:1:"8";s:29:"innodb_buffer_pool_awe_mem_mb";s:1:"0";s:23:"innodb_buffer_pool_size";s:8:"17825792";s:21:"innodb_data_file_path";s:22:"ibdata1:10M:autoextend";s:20:"innodb_data_home_dir";s:0:"";s:20:"innodb_fast_shutdown";s:2:"ON";s:22:"innodb_file_io_threads";s:1:"4";s:21:"innodb_file_per_table";s:3:"OFF";s:30:"innodb_flush_log_at_trx_commit";s:1:"1";s:19:"innodb_flush_method";s:0:"";s:21:"innodb_force_recovery";s:1:"0";s:24:"innodb_lock_wait_timeout";s:2:"50";s:30:"innodb_locks_unsafe_for_binlog";s:3:"OFF";s:19:"innodb_log_arch_dir";s:0:"";s:18:"innodb_log_archive";s:3:"OFF";s:22:"innodb_log_buffer_size";s:7:"1048576";s:20:"innodb_log_file_size";s:8:"10485760";s:25:"innodb_log_files_in_group";s:1:"2";s:25:"innodb_log_group_home_dir";s:2:".\";s:26:"innodb_max_dirty_pages_pct";s:2:"90";s:20:"innodb_max_purge_lag";s:1:"0";s:26:"innodb_mirrored_log_groups";s:1:"1";s:17:"innodb_open_files";s:3:"300";s:18:"innodb_table_locks";s:2:"ON";s:25:"innodb_thread_concurrency";s:1:"8";s:19:"interactive_timeout";s:5:"28800";s:16:"join_buffer_size";s:6:"131072";s:15:"key_buffer_size";s:8:"10485760";s:23:"key_cache_age_threshold";s:3:"300";s:20:"key_cache_block_size";s:4:"1024";s:24:"key_cache_division_limit";s:3:"100";s:8:"language";s:24:"D:\MySQL4\share\english\";s:19:"large_files_support";s:2:"ON";s:13:"lc_time_names";s:5:"en_US";s:7:"license";s:3:"GPL";s:12:"local_infile";s:2:"ON";s:3:"log";s:3:"OFF";s:7:"log_bin";s:3:"OFF";s:9:"log_error";s:9:".\ZZZ.err";s:17:"log_slave_updates";s:3:"OFF";s:16:"log_slow_queries";s:3:"OFF";s:10:"log_update";s:3:"OFF";s:12:"log_warnings";s:1:"1";s:15:"long_query_time";s:2:"10";s:20:"low_priority_updates";s:3:"OFF";s:22:"lower_case_file_system";s:3:"OFF";s:22:"lower_case_table_names";s:1:"1";s:18:"max_allowed_packet";s:7:"1048576";s:21:"max_binlog_cache_size";s:10:"4294967295";s:15:"max_binlog_size";s:10:"1073741824";s:18:"max_connect_errors";s:2:"10";s:15:"max_connections";s:3:"100";s:19:"max_delayed_threads";s:2:"20";s:15:"max_error_count";s:2:"64";s:19:"max_heap_table_size";s:8:"16777216";s:26:"max_insert_delayed_threads";s:2:"20";s:13:"max_join_size";s:10:"4294967295";s:24:"max_length_for_sort_data";s:4:"1024";s:23:"max_prepared_stmt_count";s:5:"16382";s:18:"max_relay_log_size";s:1:"0";s:17:"max_seeks_for_key";s:10:"4294967295";s:15:"max_sort_length";s:4:"1024";s:14:"max_tmp_tables";s:2:"32";s:20:"max_user_connections";s:1:"0";s:20:"max_write_lock_count";s:10:"4294967295";s:24:"myisam_data_pointer_size";s:1:"4";s:31:"myisam_max_extra_sort_file_size";s:12:"107374182400";s:25:"myisam_max_sort_file_size";s:12:"107374182400";s:22:"myisam_recover_options";s:3:"OFF";s:21:"myisam_repair_threads";s:1:"1";s:23:"myisam_sort_buffer_size";s:8:"17825792";s:19:"myisam_stats_method";s:13:"nulls_unequal";s:10:"named_pipe";s:3:"OFF";s:17:"net_buffer_length";s:5:"16384";s:16:"net_read_timeout";s:2:"30";s:15:"net_retry_count";s:2:"10";s:17:"net_write_timeout";s:2:"60";s:3:"new";s:3:"OFF";s:13:"old_passwords";s:3:"OFF";s:16:"open_files_limit";s:3:"622";s:8:"pid_file";s:22:"D:\MySQL4\Data\ZZZ.pid";s:4:"port";s:4:"3306";s:19:"preload_buffer_size";s:5:"32768";s:19:"prepared_stmt_count";s:1:"0";s:16:"protocol_version";s:2:"10";s:22:"query_alloc_block_size";s:4:"8192";s:17:"query_cache_limit";s:7:"1048576";s:24:"query_cache_min_res_unit";s:4:"4096";s:16:"query_cache_size";s:1:"0";s:16:"query_cache_type";s:2:"ON";s:28:"query_cache_wlock_invalidate";s:3:"OFF";s:19:"query_prealloc_size";s:4:"8192";s:22:"range_alloc_block_size";s:4:"2048";s:16:"read_buffer_size";s:5:"61440";s:9:"read_only";s:3:"OFF";s:20:"read_rnd_buffer_size";s:6:"258048";s:15:"relay_log_purge";s:2:"ON";s:21:"relay_log_space_limit";s:1:"0";s:17:"rpl_recovery_rank";s:1:"0";s:11:"secure_auth";s:3:"OFF";s:13:"shared_memory";s:3:"OFF";s:23:"shared_memory_base_name";s:5:"MYSQL";s:9:"server_id";s:1:"0";s:21:"skip_external_locking";s:2:"ON";s:15:"skip_networking";s:3:"OFF";s:18:"skip_show_database";s:3:"OFF";s:17:"slave_net_timeout";s:4:"3600";s:25:"slave_transaction_retries";s:1:"0";s:16:"slow_launch_time";s:1:"2";s:16:"sort_buffer_size";s:6:"262136";s:8:"sql_mode";s:0:"";s:9:"sql_notes";s:2:"ON";s:12:"sql_warnings";s:2:"ON";s:14:"storage_engine";s:6:"InnoDB";s:11:"sync_binlog";s:1:"0";s:8:"sync_frm";s:2:"ON";s:16:"sync_replication";s:1:"0";s:25:"sync_replication_slave_id";s:1:"0";s:24:"sync_replication_timeout";s:1:"0";s:16:"system_time_zone";s:12:"中国标准时间";s:11:"table_cache";s:3:"256";s:10:"table_type";s:6:"InnoDB";s:17:"thread_cache_size";s:1:"8";s:12:"thread_stack";s:6:"196608";s:11:"time_format";s:8:"%H:%i:%s";s:9:"time_zone";s:6:"SYSTEM";s:14:"tmp_table_size";s:7:"9437184";s:6:"tmpdir";s:0:"";s:28:"transaction_alloc_block_size";s:4:"8192";s:25:"transaction_prealloc_size";s:4:"4096";s:12:"tx_isolation";s:15:"REPEATABLE-READ";s:7:"version";s:19:"4.1.21-community-nt";s:15:"version_comment";s:29:"MySQL Community Edition (GPL)";s:23:"version_compile_machine";s:4:"ia32";s:18:"version_compile_os";s:5:"Win32";s:12:"wait_timeout";s:5:"28800";}');

		echo "<table>";
		foreach($table as $row){
			echo "<tr><td>".$row[0]."</td>";
			$staValue = $sta[$row[0]];
			if(isset($staValue)){
				if($staValue == $row[1]){
					echo "<td><font color=green>".$row[1]."</font></td><td><font color=green>".$staValue."</font></td>";
				}else{
					echo "<td><font color=red>".$row[1]."</font></td><td><font color=red>".$staValue."</font></td>";
				}
			}else{
				echo "<td>".$row[1]."</td><td>&nbsp;</td>";
			}
			echo "</tr>\r\n";
		}
		echo "</table>";

?>