<form action="index.php?ctl=users&amp;act=chkpassword&amp;finder_id=a9b819" id="user-chkpass-form">
    <div class="tableform">      
     <div class="division">
         <input type="hidden" name="user_id" value="<{$user_id}>" /> 
                <table cellspacing="0" cellpadding="0" width="100%">
                <tbody>
                <tr><th><em class="red">*</em><label for="dom_el_ea78c40">旧密码：</label></th><td><input type="password" id="dom_el_ea78c40"  vtype="required"  name="old_login_password" title="用户名：" class="x-input " autocomplete="off"/></td></tr>
                <tr><th><em class="red">*</em><label for="dom_el_ea78c41">新密码：</label></th><td><input type="password" id="dom_el_ea78c41" vtype="required" name="new_login_password" title="密码：" class="x-input " autocomplete="off"/></td></tr>
                <tr><th><em class="red">*</em><label for="dom_el_ea78c42">再次输入新密码：</label></th><td><input type="password" id="dom_el_ea78c42" vtype="required" name="pam_account[login_password]" title="确认密码：" class="x-input " autocomplete="off"/></td></tr>
                
</tbody>
</table>
</div>
</div>
</from>
 <{area inject=".mainFoot"}>
<div class="table-action">
    <table width="100%" cellspacing="0" cellpadding="0">
        <tbody>
            <tr>
                <td><{button label="确定" class="btn btn-primary" id="user-chkpass-form-submit" type="submit"}></td>
            </tr>
        </tbody>
    </table>
</div>
<{/area}>
<script>
(function(){
    var _form = $('user-chkpass-form');
    var btn =$('user-chkpass-form-submit');
    var finder = finderGroup['<{$env.get.finder_id}>'];
    
    _form.store('target',{
        onComplete:function(){            
            
        },
        onSuccess:function(response){
            var hash_res_obj = JSON.decode(response);
            if (hash_res_obj.success != undefined && hash_res_obj.success != "")
            {
                try{
                    var _dialogIns = btn.getParent('.dialog').retrieve('instance');
                }catch(e){}
                
                if(_dialogIns)
                {
                    _dialogIns.close();
                    finder.refresh.delay(400,finder);
                }
            }
            else
            {
                //alert(hash_res_obj.error);
            }            
        }
    });

        btn.addEvent('click',function(){
        
            _form.fireEvent('submit',{stop:$empty});
            
        
        
        });
    
})();
    
    
</script>